# Работа с git
## Репозитории и файлы
для начала вспомним основные команды для работы с репозиторием  
_создание репозитория и его открытие_  
~~~
mkdir lessons
cd lessons
~~~

Мы находимся внутри репозитория lessons, пришло время _создать в нем файл_  
~~~
touch lesson_1.txt
~~~

После создания файла следует внести в него изменения, написать любой текст, открыв его с помощью любого текстового редактора  
Чтобы узнать, что написано в файле с помощью git существует следующая команда:
~~~
cat lesson_1.txt
~~~
## Инициализация Git и работа с ним  

_Для того, чтобы инициализировать наш репозиторий, используется следующая команда_:
~~~
git init
~~~
Данная команда используется внутри необходимого репозитория  

Чтобы проверить _состояние репозитория_ используется следующая команда:
~~~
git status
~~~

Чтобы _подготовить файлы к сохранению_ используется следующая команда:
~~~
git add --all
~~~
или
~~~
git add .
~~~
или, если мы хотим подготовить только определенный файл
~~~
git add lesson_1.txt
~~~

Чтобы _выполнить коммит_ используется следующая команда:
~~~
git commit -m "some text"
~~~
ключ -m необходим для добавления комментария, обязательного для создания коммита

Чтобы _посмотреть историю изменений_ используется следующая команда:
~~~
git log
~~~
---

# Работа с GitHub
## Создаем удаленный репозиторий
1. Зайдите в свой профиль  
2. Создайте репозиторий  
## Генерируем SSH-ключ
Для его генерации напишите следующую команду, делать это необходимо в домашней директории
~~~
cd ~
~~~
Переход в домашнюю директорию  
~~~
ssh-keygen -t rsa -b 4096 -C "электронная почта, к которой привязан ваш аккаунт на GitHub"
~~~
Генерация SSH-ключа  
_Проверка сгенерированного ключа_
~~~
ls -a ~/.ssh
~~~
## Привязываем SSH-ключ к GitHub
1. Скопировать содержимое ключа в буфер обмена:
~~~
clip < ~/.ssh/id_rsa.pub
~~~
2. Перейдите на GitHub и выберите пункт Settings в меню аккаунта.  
3. В меню слева нажмите на пункт SSH and GPG keys.  
4. В открывшейся вкладке выберите New SSH key.  
5. В поле Title напишите название ключа. Например, Personal key.  
6. В поле Key type должно быть Authentication Key.  
7. В поле Key скопируйте ваш ключ из буфера обмена.  
8. Нажмите на кнопку Add SSH key.  
9. Проверьте правильность ключа с помощью следующей команды:
~~~
ssh -T git@github.com
~~~
## Привязаем удалённый репозиторий к локальному 
~~~
git remote add origin git@github.com:%ИМЯ_АККАУНТА%/first-project.git
~~~

## Отправить изменения на удалённый репозиторий
~~~
git push -u origin master
~~~
# Хеш — идентификатор коммита
Хеш — это короткая (40 символов в случае SHA-1) строка, которая состоит из циф 0—9 и латинских букв A—F (неважно, заглавных или строчных).  
Если вы знаете хеш, вы можете узнать всё остальное: автора и дату коммита и содержимое закоммиченных файлов. Можно сказать, что хеш — основной идентификатор коммита.
# Исследуем лог
После вызова git log появляется список коммитов.  
Разберём элементы, из которых состоит описание:  
- строка из цифр и латинских букв после слова commit — это хеш коммита;  
- Author — имя автора и его электронная почта;  
- Date — дата и время создания коммита;  
- в конце находится сообщение коммита. 


Получить сокращённый лог — git log --oneline

Сокращённый хеш (то есть первые несколько символов полного) можно использовать точно так же, как и полный. Для этого команда git log --oneline автоматически подбирает такую длину сокращённых хешей, чтобы они были уникальными в пределах репозитория и Git всегда мог понять, о каком коммите идёт речь.  

# HEAD — всему голова
Файл HEAD (англ. «голова», «головной») — один из служебных файлов папки .git. Он указывает на коммит, который сделан последним (то есть на самый новый).  
Внутри HEAD — ссылка на служебный файл: refs/heads/master (или refs/heads/main в зависимости от названия ветки). Если заглянуть в этот файл, можно увидеть хеш последнего коммита.  

# Статусы файлов в Git
Одна из ключевых задач Git — отслеживать изменения файлов в репозитории. Для этого каждый файл помечается каким-либо статусом. Рассмотрим основные.  

- untracked (англ. «неотслеживаемый») Мы говорили, что новые файлы в Git-репозитории помечаются как untracked, то есть неотслеживаемые. Git «видит», что такой файл существует, но не следит за изменениями в нём. У untracked-файла нет предыдущих версий, зафиксированных в коммитах или через команду git add.  
- staged (англ. «подготовленный») После выполнения команды git add файл попадает в staging area, то есть в список файлов, которые войдут в коммит. В этот момент файл находится в состоянии staged.  
- tracked (англ. «отслеживаемый») Состояние tracked — это противоположность untracked. Оно довольно широкое по смыслу: в него попадают файлы, которые уже были зафиксированы с помощью git commit, а также файлы, которые были добавлены в staging area командой git add. То есть все файлы, в которых Git так или иначе отслеживает изменения.  
- modified (англ. «изменённый») Состояние modified означает, что Git сравнил содержимое файла с последней сохранённой версией и нашёл отличия. Например, файл был закоммичен и после этого изменён.  
## Типичный жизненный цикл файла в Git
~~~
mermaid
flowchart TD
    A[untracked (неотслеживаемый)] -- git add --> B[staged (в списке на коммит) + tracked];
    B -- git commit --> C[tracked (отслеживаемый)];
    B -- изменения --> D[modified (измененный)];
    C -- изменения --> D[modified (измененный)];
    D -- git add --> B[staged (в списке на коммит) + tracked];
~~~
